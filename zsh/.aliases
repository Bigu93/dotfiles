# --- General Utilities ---
alias l="ls -lAh"
alias ll="ls -al"
alias la="ls -la"
alias ..="cd .."
alias ...="cd ../.."
alias c="clear"
alias h="history"
alias myip="ip -br addr show tun0 | awk '{print \$1 \" \" \$3}'"
alias update="sudo apt update && sudo apt full-upgrade -y && sudo apt autoremove -y"
alias remove="sudo apt remove"

# --- System ---
alias reboot="sudo /sbin/reboot"
alias poweroff="sudo /sbin/poweroff"
alias halt="sudo /sbin/halt"
alias shutdown="sudo /sbin/shutdown"

# --- Processes ---
alias psmem="ps auxf | sort -nr -k 4"
alias psmem10="ps auxf | sort -nr -k 4 | head -10"
alias pscpu="ps auxf | sort -nr -k 3"
alias pscpu10="ps auxf | sort -nr -k 3 | head -10"

# --- File Management ---
alias dfh="df -h"
alias duh="du -h --max-depth=1"
alias reload="source ~/.zshrc"
alias usage="du -ch | grep total"
alias totalusage="df -hl --total | grep total"

# --- Docker ---
alias dl="sudo docker ps -a"
alias dps="sudo docker ps"

# Set target: "sett 10.10.10.10"
alias sett='function _sett(){ echo "$1" > ~/.target_ip; echo "Target set to $1"; }; _sett'

# --- Networking & Scanning ---
alias ports="sudo lsof -i -P -n | grep LISTEN"
alias nmapfast="nmap -T4 -F" # Fast scan top 100 ports
alias nmapfull="nmap -p- -T4 -A -v" # Scan all ports, aggressive
alias pg="ping google.com -c 5"
alias pf="ping facebook.com -c 5"

# --- Web ---
alias ffufsub="ffuf -u HOST -w /usr/share/wordlists/seclists/Discovery/DNS/subdomains-top1million-110000.txt"
alias gobusterdir="gobuster dir -w /usr/share/wordlists/dirb/common.txt -t 50 -u"
alias server="python3 -m http.server 8000"

# --- Shell Stabilization (The Magic Trick) ---
# Run this after catching a reverse shell to make it stable
alias fixshell='python3 -c "import pty; pty.spawn(\"/bin/bash\")"; export TERM=xterm'

# --- Safety ---
# Ask for confirmation before overwriting or deleting
alias mv="mv -i"
alias cp="cp -i"
alias rm="rm -i"

# Other
alias shortcuts='echo -e "\n\033[1;32mTMUX SHORTCUTS:\033[0m\n  Prefix: Ctrl+a\n  Split:  Prefix + | OR -\n  Move:   Alt + Arrows\n  Zoom:   Prefix + z\n  Copy:   Prefix + [ -> Space -> Enter\n  Paste:  Prefix + p\n"'

# --- FUNCTIONS ---
urlencode() {
   python3 -c "import sys, urllib.parse as ul; print(ul.quote_plus(sys.argv[1]))" "$1"
}

urldecode() {
    python3 -c "import sys, urllib.parse as ul; print(ul.unquote_plus(sys.argv[1]))" "$1"
}
